<!DOCTYPE html>
<html lang="ja" data-theme="dark">
<head>
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>APIpedia - æ—¥æœ¬èªAPIã‚«ã‚¿ãƒ­ã‚°</title>
<meta name="description" content="APIPediaï¼ˆAPIãºãƒ‡ã‚£ã‚¢ï¼‰ã¯æ—¥æœ¬èªã§APIã‚’æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»é¸å®šã§ãã‚‹é–‹ç™ºè€…å‘ã‘ã‚«ã‚¿ãƒ­ã‚°ã€‚128ä»¶ã®APIã‚’21ã‚«ãƒ†ã‚´ãƒªã§æ•´ç†ã€‚æ–™é‡‘ãƒ»èªè¨¼æ–¹å¼ãƒ»SDKå¯¾å¿œã‚’ä¸€è¦§æ¯”è¼ƒã€‚">
<!-- OGP -->
<meta property="og:type" content="website">
<meta property="og:title" content="APIPedia â€” æ—¥æœ¬èªã§ã€æ¢ã›ã‚‹ã€‚ã‚ã‹ã‚‹ã€‚é¸ã¹ã‚‹ã€‚">
<meta property="og:description" content="æ—¥æœ¬èªã§APIã‚’æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»é¸å®šã§ãã‚‹é–‹ç™ºè€…å‘ã‘ã‚«ã‚¿ãƒ­ã‚°ã‚µã‚¤ãƒˆã€‚100+ã®APIã‚’18ã‚«ãƒ†ã‚´ãƒªã§æ•´ç†ã€‚">
<meta property="og:url" content="https://apipedia.dev/">
<meta property="og:site_name" content="APIPedia">
<meta property="og:locale" content="ja_JP">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="APIPedia â€” æ—¥æœ¬èªã§ã€æ¢ã›ã‚‹ã€‚ã‚ã‹ã‚‹ã€‚é¸ã¹ã‚‹ã€‚">
<meta name="twitter:description" content="æ—¥æœ¬èªã§APIã‚’æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»é¸å®šã§ãã‚‹é–‹ç™ºè€…å‘ã‘ã‚«ã‚¿ãƒ­ã‚°ã‚µã‚¤ãƒˆ">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="canonical" href="https://apipedia.dev/">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "APIpedia",
  "alternateName": "APIãºãƒ‡ã‚£ã‚¢",
  "url": "https://apipedia.dev/",
  "description": "æ—¥æœ¬èªã§æ¢ã›ã‚‹ãƒ»ã‚ã‹ã‚‹ãƒ»é¸ã¹ã‚‹APIã‚«ã‚¿ãƒ­ã‚°ã€‚100ä»¥ä¸Šã®APIã‚’æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»ç™ºè¦‹ã€‚",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://apipedia.dev/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "APIPediaã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "APIPediaï¼ˆAPIãºãƒ‡ã‚£ã‚¢ï¼‰ã¯ã€æ—¥æœ¬èªã§APIã‚’æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»é¸å®šã§ãã‚‹é–‹ç™ºè€…å‘ã‘ã‚«ã‚¿ãƒ­ã‚°ã‚µã‚¤ãƒˆã§ã™ã€‚128ä»¶ä»¥ä¸Šã®APIã‚’21ã‚«ãƒ†ã‚´ãƒªã§æ•´ç†ã—ã€æ–™é‡‘ãƒ»èªè¨¼æ–¹å¼ãƒ»SDKå¯¾å¿œãƒ»äººæ°—ã‚¹ã‚³ã‚¢ãªã©ã‚’çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æ¯”è¼ƒã§ãã¾ã™ã€‚"
      }
    },
    {
      "@type": "Question",
      "name": "æ²è¼‰ã•ã‚Œã¦ã„ã‚‹APIã¯ç„¡æ–™ã§ä½¿ãˆã¾ã™ã‹ï¼Ÿ",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "æ²è¼‰APIã®å¤šãã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã¾ãŸã¯ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚å„APIã®æ–™é‡‘ä½“ç³»ï¼ˆç„¡æ–™ãƒ»ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ ãƒ»æœ‰æ–™ï¼‰ã¯ã‚«ã‚¿ãƒ­ã‚°ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã§çµã‚Šè¾¼ã‚ã¾ã™ã€‚è©³ç´°ãªæ–™é‡‘æƒ…å ±ã¯å„APIã®å€‹åˆ¥ãƒšãƒ¼ã‚¸ã§ç¢ºèªã§ãã¾ã™ã€‚"
      }
    },
    {
      "@type": "Question",
      "name": "APIã®äººæ°—ã‚¹ã‚³ã‚¢ã¯ã©ã®ã‚ˆã†ã«ç®—å‡ºã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "äººæ°—ã‚¹ã‚³ã‚¢ã¯ã€åˆ©ç”¨è€…æ•°ãƒ»å¸‚å ´ã‚·ã‚§ã‚¢ãƒ»npmãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ãƒ»GitHubã‚¹ã‚¿ãƒ¼æ•°ãƒ»æ¡ç”¨ä¼æ¥­æ•°ãªã©ã‚’ç·åˆçš„ã«è©•ä¾¡ã—ãŸ100ç‚¹æº€ç‚¹ã®ã‚¹ã‚³ã‚¢ã§ã™ã€‚å„APIã®è©³ç´°ãƒšãƒ¼ã‚¸ã§æ ¹æ‹ ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚‚ç¢ºèªã§ãã¾ã™ã€‚"
      }
    },
    {
      "@type": "Question",
      "name": "æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹APIã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "æ—¥æœ¬ç™ºã®APIï¼ˆPayPayã€LINE Messagingã€e-Statã€microCMSãªã©ï¼‰ã¯æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå……å®Ÿã—ã¦ã„ã¾ã™ã€‚ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§ã€Œæ—¥æœ¬ã€ã¾ãŸã¯ã€Œæ—¥æœ¬/ã‚°ãƒ­ãƒ¼ãƒãƒ«ã€ã‚’é¸æŠã™ã‚‹ã¨ã€æ—¥æœ¬èªå¯¾å¿œã®APIã‚’çµã‚Šè¾¼ã‚ã¾ã™ã€‚"
      }
    },
    {
      "@type": "Question",
      "name": "APIã®æƒ…å ±ã¯ã©ã®ãã‚‰ã„ã®é »åº¦ã§æ›´æ–°ã•ã‚Œã¾ã™ã‹ï¼Ÿ",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "APIã®æƒ…å ±ã¯éšæ™‚æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚æ–™é‡‘æ”¹å®šãƒ»æ–°æ©Ÿèƒ½è¿½åŠ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†ãªã©ã®é‡è¦ãªå¤‰æ›´ãŒã‚ã£ãŸå ´åˆã¯é€Ÿã‚„ã‹ã«åæ˜ ã—ã¾ã™ã€‚æœ€æ–°ã®æ›´æ–°æƒ…å ±ã¯ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼ã§ã‚‚ãŠå±Šã‘ã—ã¦ã„ã¾ã™ã€‚"
      }
    }
  ]
}
</script>
<link rel="stylesheet" href="assets/style.css">
<style>
  .hero__badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 16px;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--color-accent);
    background: var(--color-accent-light);
    border-radius: var(--radius-pill);
    margin-bottom: 20px;
  }
  .category-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    margin-top: 32px;
  }
  .category-nav__item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 18px;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-secondary);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-pill);
    cursor: pointer;
    transition: all var(--transition);
    user-select: none;
  }
  .category-nav__item:hover {
    color: var(--text-primary);
    border-color: var(--border-hover);
    background: var(--bg-secondary);
  }
  .category-nav__item.active {
    color: var(--color-primary);
    background: var(--color-primary-light);
    border-color: var(--color-primary);
  }
  .api-card__meta {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 20px;
    margin-bottom: 12px;
    flex-wrap: wrap;
  }
  .api-card__meta-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    color: var(--text-muted);
  }
  .api-card__footer {
    padding: 12px 20px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .api-card__link {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--color-primary);
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }
  .api-card__link:hover {
    color: var(--color-primary-hover);
  }
  .api-card__difficulty {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: var(--radius-pill);
  }
  .difficulty--easy {
    color: var(--color-success);
    background: var(--color-success-light);
  }
  .difficulty--medium {
    color: var(--color-warning);
    background: var(--color-warning-light);
  }
  .difficulty--hard {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.15);
  }
  .result-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    font-size: 0.9rem;
    color: var(--text-secondary);
  }
  .result-info__count {
    font-weight: 600;
    color: var(--text-primary);
  }
  .no-results {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-muted);
  }
  .no-results__icon {
    font-size: 3rem;
    margin-bottom: 16px;
    opacity: 0.5;
  }
  .no-results__text {
    font-size: 1.1rem;
    margin-bottom: 8px;
    color: var(--text-secondary);
  }
  .pricing-filters {
    display: flex;
    gap: 6px;
    margin-left: auto;
  }
  .region-tag {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: var(--radius-pill);
  }
  .region--japan {
    color: #f87171;
    background: rgba(248, 113, 113, 0.12);
  }
  .region--global {
    color: var(--color-accent);
    background: var(--color-accent-light);
  }
  .region--both {
    color: var(--color-secondary);
    background: var(--color-secondary-light);
  }
  .featured-badge {
    font-size: 0.65rem;
    font-weight: 700;
    padding: 2px 8px;
    color: var(--color-warning);
    background: var(--color-warning-light);
    border-radius: var(--radius-pill);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  /* Popularity score badge on cards */
  .popularity-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 3px 10px;
    border-radius: var(--radius-pill);
    white-space: nowrap;
  }
  .popularity-badge .score-bar {
    width: 32px;
    height: 5px;
    background: rgba(255,255,255,0.15);
    border-radius: 3px;
    overflow: hidden;
    display: inline-block;
    vertical-align: middle;
  }
  .popularity-badge .score-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.6s ease;
  }
  .popularity--high { color: var(--color-success); background: var(--color-success-light); }
  .popularity--high .score-fill { background: var(--color-success); }
  .popularity--medium { color: var(--color-warning); background: var(--color-warning-light); }
  .popularity--medium .score-fill { background: var(--color-warning); }
  .popularity--low { color: #94a3b8; background: rgba(148, 163, 184, 0.12); }
  .popularity--low .score-fill { background: #94a3b8; }

  /* Ranking section */
  .ranking-section {
    margin-top: 48px;
    margin-bottom: 16px;
  }
  .ranking-section .section__title {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .ranking-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .ranking-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    transition: all var(--transition);
    text-decoration: none;
    color: inherit;
  }
  .ranking-item:hover {
    border-color: var(--border-hover);
    background: var(--bg-secondary);
    transform: translateX(4px);
  }
  .ranking-rank {
    font-size: 1.1rem;
    font-weight: 800;
    min-width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .rank--1 { color: #fbbf24; background: rgba(251, 191, 36, 0.15); font-size: 1.3rem; }
  .rank--2 { color: #cbd5e1; background: rgba(203, 213, 225, 0.15); font-size: 1.2rem; }
  .rank--3 { color: #f97316; background: rgba(249, 115, 22, 0.15); font-size: 1.15rem; }
  .rank--other { color: var(--text-muted); background: var(--bg-secondary); }
  .ranking-info {
    flex: 1;
    min-width: 0;
  }
  .ranking-name {
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }
  .ranking-reason {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .ranking-score {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
  }
  .ranking-score__value {
    font-size: 1.5rem;
    font-weight: 800;
    min-width: 44px;
    text-align: right;
  }
  .ranking-score__bar {
    width: 80px;
    height: 8px;
    background: rgba(255,255,255,0.08);
    border-radius: 4px;
    overflow: hidden;
  }
  .ranking-score__fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.8s ease;
  }
  .score-color--high { color: var(--color-success); }
  .score-color--high .ranking-score__fill { background: linear-gradient(90deg, var(--color-success), #4ade80); }
  .score-color--medium { color: var(--color-warning); }
  .score-color--medium .ranking-score__fill { background: linear-gradient(90deg, var(--color-warning), #fbbf24); }
  .score-color--low { color: #94a3b8; }
  .score-color--low .ranking-score__fill { background: linear-gradient(90deg, #64748b, #94a3b8); }

  /* Sort controls */
  .sort-controls {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.8rem;
    color: var(--text-muted);
  }
  .sort-btn {
    font-size: 0.78rem;
    font-weight: 500;
    padding: 4px 12px;
    border-radius: var(--radius-pill);
    border: 1px solid var(--border-color);
    background: var(--bg-card);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition);
  }
  .sort-btn:hover { border-color: var(--border-hover); color: var(--text-primary); }
  .sort-btn.active {
    color: var(--color-primary);
    background: var(--color-primary-light);
    border-color: var(--color-primary);
  }

  /* Detail Modal */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
    padding: 20px;
  }
  .modal-overlay.active { opacity: 1; pointer-events: auto; }
  .modal {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    width: 100%;
    max-width: 720px;
    max-height: 85vh;
    overflow-y: auto;
    transform: translateY(20px) scale(0.97);
    transition: transform 0.25s ease;
    position: relative;
  }
  .modal-overlay.active .modal { transform: translateY(0) scale(1); }
  .modal__close {
    position: sticky; top: 0; float: right;
    margin: 12px 12px 0 0; width: 36px; height: 36px;
    border-radius: 50%; border: 1px solid var(--border-color);
    background: var(--bg-card); color: var(--text-muted);
    font-size: 1.2rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    z-index: 2; transition: all var(--transition);
  }
  .modal__close:hover { background: var(--bg-secondary); color: var(--text-primary); border-color: var(--border-hover); }
  .modal__header { padding: 28px 28px 0; }
  .modal__title { font-size: 1.4rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
  .modal__subtitle { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 16px; }
  .modal__badges { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 16px; }
  .modal__desc { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.7; padding: 0 28px; margin-bottom: 20px; }
  .modal__section { padding: 0 28px; margin-bottom: 20px; }
  .modal__section-title {
    font-size: 0.85rem; font-weight: 700; color: var(--text-primary);
    text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px;
    display: flex; align-items: center; gap: 6px;
  }
  .modal__score-hero {
    display: flex; align-items: center; gap: 20px;
    padding: 20px 28px; margin: 0 0 4px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0%, rgba(139, 92, 246, 0.06) 100%);
    border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color);
  }
  .modal__score-number { font-size: 3rem; font-weight: 800; line-height: 1; }
  .modal__score-bar-wrap { flex: 1; }
  .modal__score-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 6px; }
  .modal__score-bar { width: 100%; height: 10px; background: rgba(255,255,255,0.08); border-radius: 5px; overflow: hidden; }
  .modal__score-fill { height: 100%; border-radius: 5px; transition: width 0.8s ease; }
  .modal__score-reason { font-size: 0.85rem; color: var(--text-secondary); margin-top: 8px; line-height: 1.6; }
  .modal__metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .modal__metric { padding: 12px; background: var(--bg-secondary); border-radius: 10px; border: 1px solid var(--border-color); }
  .modal__metric-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px; margin-bottom: 4px; }
  .modal__metric-value { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); }
  .modal__adopters { display: flex; flex-wrap: wrap; gap: 6px; }
  .modal__adopter {
    padding: 5px 12px; font-size: 0.8rem; font-weight: 500;
    color: var(--text-secondary); background: var(--bg-secondary);
    border: 1px solid var(--border-color); border-radius: var(--radius-pill);
  }
  .modal__sources { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 6px; }
  .modal__source-link {
    display: flex; align-items: flex-start; gap: 8px;
    padding: 10px 14px; background: var(--bg-secondary);
    border: 1px solid var(--border-color); border-radius: 10px;
    text-decoration: none; color: var(--color-primary);
    font-size: 0.82rem; font-weight: 500;
    transition: all var(--transition); line-height: 1.4;
  }
  .modal__source-link:hover { border-color: var(--color-primary); background: var(--color-primary-light); }
  .modal__detail-text {
    font-size: 0.88rem; color: var(--text-secondary); line-height: 1.7;
    padding: 14px 16px; background: var(--bg-secondary);
    border: 1px solid var(--border-color); border-radius: 10px;
  }
  .modal__actions { display: flex; gap: 10px; padding: 20px 28px 28px; }
  .modal__action-btn {
    flex: 1; padding: 12px 20px; border-radius: 10px;
    font-size: 0.85rem; font-weight: 600; text-align: center;
    text-decoration: none; transition: all var(--transition);
    display: inline-flex; align-items: center; justify-content: center; gap: 6px;
  }
  .modal__action-btn--primary { background: var(--color-primary); color: #fff; border: none; }
  .modal__action-btn--primary:hover { background: var(--color-primary-hover); }
  .modal__action-btn--secondary { background: var(--bg-secondary); color: var(--text-secondary); border: 1px solid var(--border-color); }
  .modal__action-btn--secondary:hover { border-color: var(--border-hover); color: var(--text-primary); }
  @media (max-width: 768px) {
    .modal { max-height: 90vh; border-radius: 12px; }
    .modal__header { padding: 20px 20px 0; }
    .modal__desc, .modal__section { padding: 0 20px; }
    .modal__score-hero { padding: 16px 20px; }
    .modal__actions { padding: 16px 20px 20px; }
    .modal__metrics { grid-template-columns: 1fr; }
    .modal__title { font-size: 1.2rem; }
    .modal__score-number { font-size: 2.4rem; }
  }
  .api-card { cursor: pointer; }

  .about-section {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: 40px;
    margin-top: 32px;
    text-align: center;
  }
  .about-section h3 {
    font-size: 1.3rem;
    margin-bottom: 12px;
  }
  .about-section p {
    max-width: 640px;
    margin: 0 auto;
    font-size: 0.95rem;
  }
  .mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 4px;
  }
  @media (max-width: 768px) {
    .mobile-menu-btn { display: block; }
    .hero__title { font-size: 1.6rem !important; }
    .hero__badge { font-size: 0.7rem; }
    .category-nav { gap: 6px; }
    .category-nav__item { padding: 6px 12px; font-size: 0.78rem; }
    .about-section { padding: 24px 16px; }
    .result-info { flex-direction: column; gap: 8px; align-items: flex-start; }
    .pricing-filters { margin-left: 0; }
    .ranking-item { padding: 10px 14px; gap: 10px; }
    .ranking-score__bar { width: 50px; }
    .ranking-reason { display: none; }
    .sort-controls { margin-top: 8px; }
  }
</style>
</head>
<body>

<!-- Header -->
<header class="site-header">
  <div class="container">
    <a href="index.html" class="site-header__logo">
      <span>APIpedia</span>
    </a>
    <nav class="site-header__nav">
      <a href="#ranking" class="nav-link">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
      <a href="#catalog" class="nav-link active">ã‚«ã‚¿ãƒ­ã‚°</a>
      <a href="#categories" class="nav-link">ã‚«ãƒ†ã‚´ãƒª</a>
      <a href="compare.html" class="nav-link">æ¯”è¼ƒè¡¨</a>
      <a href="guides/" class="nav-link">ã‚¬ã‚¤ãƒ‰</a>
      <a href="lean-canvas.html" class="nav-link">ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</a>
      <a href="strategy.html" class="nav-link">æˆ¦ç•¥</a>
      <a href="https://github.com" class="nav-link" target="_blank" rel="noopener">GitHub</a>
    </nav>
    <button class="theme-toggle" id="themeToggle" aria-label="ãƒ†ãƒ¼ãƒåˆ‡æ›¿" title="ãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">&#x1F319;</button>
    <button class="mobile-menu-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">&#9776;</button>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="container">
    <div class="hero__badge">v2.0 - 100 APIs æ²è¼‰</div>
    <h1 class="hero__title">æ—¥æœ¬èªã§ã€æ¢ã›ã‚‹ã€‚ã‚ã‹ã‚‹ã€‚é¸ã¹ã‚‹ã€‚</h1>
    <p class="hero__subtitle">é–‹ç™ºã«ä½¿ãˆã‚‹APIã‚’æ—¥æœ¬èªã§æ¤œç´¢ãƒ»æ¯”è¼ƒãƒ»ç™ºè¦‹ã§ãã‚‹ã‚«ã‚¿ãƒ­ã‚°ã‚µã‚¤ãƒˆã€‚<br>ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«æ•´ç†ã•ã‚ŒãŸæƒ…å ±ã§ã€æœ€é©ãªAPIã‚’æœ€çŸ­ã§è¦‹ã¤ã‘ã‚ˆã†ã€‚</p>
    <div class="search-bar">
      <svg class="search-bar__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input type="text" class="search-bar__input" id="searchInput" placeholder="APIã‚’æ¤œç´¢... (ä¾‹: æ±ºæ¸ˆ, å¤©æ°—, ç¿»è¨³, LINE)" autocomplete="off">
      <div class="autocomplete-list" id="autocompleteList" role="listbox"></div>
    </div>
    <!-- Stats -->
    <div class="stats-bar" id="statsBar">
      <div class="stat-item">
        <div class="stat-item__value" id="totalApis">-</div>
        <div class="stat-item__label">APIæ²è¼‰æ•°</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__value" id="totalCategories">-</div>
        <div class="stat-item__label">ã‚«ãƒ†ã‚´ãƒª</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__value" id="freeApis">-</div>
        <div class="stat-item__label">ç„¡æ–™API</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__value" id="japanApis">-</div>
        <div class="stat-item__label">æ—¥æœ¬å¯¾å¿œ</div>
      </div>
    </div>
  </div>
</section>

<!-- Category Navigation -->
<section id="categories" class="container">
  <div class="category-nav" id="categoryNav"></div>
</section>

<!-- Category Compare Links -->
<section style="padding: 16px 0 0;">
  <div class="container" style="text-align: center;">
    <a href="compare.html" style="display: inline-flex; align-items: center; gap: 6px; font-size: 0.85rem; font-weight: 600; color: var(--color-primary); text-decoration: none; padding: 8px 20px; border: 1px solid var(--color-primary); border-radius: var(--radius-pill); transition: all 0.2s;">ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«æ¯”è¼ƒã™ã‚‹ &rarr;</a>
  </div>
</section>

<!-- Ranking -->
<section id="ranking" class="section">
  <div class="container">
    <div class="ranking-section">
      <div class="section__title">API äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP 15</div>
      <p style="color:var(--text-muted);font-size:0.85rem;margin-bottom:24px;">åˆ©ç”¨è€…æ•°ãƒ»å¸‚å ´ã‚·ã‚§ã‚¢ãƒ»npmãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ãƒ»GitHubã‚¹ã‚¿ãƒ¼æ•°ãªã©ã‚’ç·åˆçš„ã«è©•ä¾¡ã—ãŸã‚¹ã‚³ã‚¢ã«åŸºã¥ããƒ©ãƒ³ã‚­ãƒ³ã‚°ã§ã™ã€‚</p>
      <div class="ranking-list" id="rankingList"></div>
    </div>
  </div>
</section>

<!-- Catalog -->
<section id="catalog" class="section">
  <div class="container">
    <div class="section__title">APIã‚«ã‚¿ãƒ­ã‚°</div>

    <div class="result-info">
      <div>
        <span class="result-info__count" id="resultCount">0</span> ä»¶ã®APIãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ
      </div>
      <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
      <button class="favorite-filter-btn" id="favoriteFilterBtn" title="ãŠæ°—ã«å…¥ã‚Šã®ã¿è¡¨ç¤º">&#x2764;&#xFE0F; ãŠæ°—ã«å…¥ã‚Š <span class="favorite-badge" id="favoriteBadge" style="display:none;">0</span></button>
      <div class="sort-controls">
        <span>ä¸¦ã¹æ›¿ãˆ:</span>
        <button class="sort-btn active" data-sort="default">ãŠã™ã™ã‚</button>
        <button class="sort-btn" data-sort="popularity">äººæ°—é †</button>
        <button class="sort-btn" data-sort="name">åå‰é †</button>
      </div>
      <div class="pricing-filters">
        <button class="filter-chip active" data-pricing="all">ã™ã¹ã¦</button>
        <button class="filter-chip" data-pricing="free">ç„¡æ–™</button>
        <button class="filter-chip" data-pricing="freemium">ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ </button>
        <button class="filter-chip" data-pricing="paid">æœ‰æ–™</button>
      </div>
      </div>
    </div>

    <div class="grid" id="apiGrid"></div>

    <div class="no-results" id="noResults" style="display:none;">
      <div class="no-results__icon">&#x1F50D;</div>
      <div class="no-results__text">è©²å½“ã™ã‚‹APIãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>
      <p>æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„</p>
    </div>
  </div>
</section>

<!-- About -->
<section class="section">
  <div class="container">
    <div class="about-section">
      <h3>APIpedia ã«ã¤ã„ã¦</h3>
      <p>APIpedia ã¯ã€æ—¥æœ¬ã®é–‹ç™ºè€…ãŒè¨€èªã®å£ãªãAPIã‚’ç™ºè¦‹ãƒ»ç†è§£ãƒ»æ´»ç”¨ã§ãã‚‹ã“ã¨ã‚’ç›®æŒ‡ã™æ—¥æœ¬èªAPIã‚«ã‚¿ãƒ­ã‚°ã§ã™ã€‚çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§APIã®æ¦‚è¦ãƒ»æ–™é‡‘ãƒ»åˆ¶é™ã‚’æ•´ç†ã—ã€ã€Œæ¢ã™ã€ã‚’ã€Œä½¿ã†ã€ã«æœ€çŸ­è·é›¢ã§ã¤ãªãã¾ã™ã€‚</p>
    </div>
  </div>
</section>

<!-- Guides CTA -->
<section style="padding: 0 0 48px;">
  <div class="container">
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; margin-bottom: 32px;">
      <a href="guides/payment-api-comparison.html" style="display: block; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 20px; text-decoration: none; transition: all 0.2s;">
        <div style="font-size: 1.5rem; margin-bottom: 8px;">ğŸ’³</div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">æ±ºæ¸ˆAPIæ¯”è¼ƒã‚¬ã‚¤ãƒ‰</div>
        <div style="font-size: 0.8rem; color: var(--text-secondary);">Stripe vs PayPay vs Square</div>
      </a>
      <a href="guides/auth-api-comparison.html" style="display: block; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 20px; text-decoration: none; transition: all 0.2s;">
        <div style="font-size: 1.5rem; margin-bottom: 8px;">ğŸ”</div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">èªè¨¼APIæ¯”è¼ƒã‚¬ã‚¤ãƒ‰</div>
        <div style="font-size: 0.8rem; color: var(--text-secondary);">Auth0 vs Firebase vs Clerk</div>
      </a>
      <a href="guides/ai-api-comparison.html" style="display: block; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 20px; text-decoration: none; transition: all 0.2s;">
        <div style="font-size: 1.5rem; margin-bottom: 8px;">ğŸ¤–</div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">AI/LLM APIæ¯”è¼ƒã‚¬ã‚¤ãƒ‰</div>
        <div style="font-size: 0.8rem; color: var(--text-secondary);">OpenAI vs Claude vs Gemini</div>
      </a>
      <a href="guides/" style="display: block; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 20px; text-decoration: none; transition: all 0.2s;">
        <div style="font-size: 1.5rem; margin-bottom: 8px;">ğŸ“–</div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--color-primary); margin-bottom: 4px;">å…¨ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹ &rarr;</div>
        <div style="font-size: 0.8rem; color: var(--text-secondary);">5ã‚«ãƒ†ã‚´ãƒªã®æ¯”è¼ƒã‚¬ã‚¤ãƒ‰</div>
      </a>
    </div>
  </div>
</section>

<!-- Newsletter -->
<section id="newsletter" style="padding: 0 0 64px;">
  <div class="container">
    <div style="background: linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(139,92,246,0.08) 100%); border: 1px solid rgba(59,130,246,0.2); border-radius: var(--radius); padding: 48px 32px; text-align: center;">
      <h2 style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">APIpedia ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼</h2>
      <p style="color: var(--text-secondary); font-size: 0.9rem; max-width: 500px; margin: 0 auto 24px;">æ–°ç€APIæƒ…å ±ã€æ¯”è¼ƒã‚¬ã‚¤ãƒ‰ã®æ›´æ–°ã€æ¥­ç•Œãƒˆãƒ¬ãƒ³ãƒ‰ã‚’æœˆ2å›ãŠå±Šã‘ã—ã¾ã™ã€‚</p>
      <form style="display: flex; gap: 10px; max-width: 460px; margin: 0 auto;" action="https://formspree.io/f/placeholder" method="POST">
        <input type="email" name="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›" required style="flex: 1; padding: 12px 16px; font-size: 0.9rem; font-family: inherit; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-sm); color: var(--text-primary); outline: none;">
        <button type="submit" style="padding: 12px 24px; font-size: 0.85rem; font-weight: 600; font-family: inherit; background: linear-gradient(135deg, var(--color-primary), var(--color-secondary)); color: #fff; border: none; border-radius: var(--radius-sm); cursor: pointer; white-space: nowrap;">ç™»éŒ²ã™ã‚‹</button>
      </form>
      <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 12px;">ã‚¹ãƒ‘ãƒ ã¯é€ã‚Šã¾ã›ã‚“ã€‚ã„ã¤ã§ã‚‚ç™»éŒ²è§£é™¤ã§ãã¾ã™ã€‚</p>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="site-footer">
  <div class="container">
    <div class="site-footer__inner">
      <div>
        <div class="site-footer__brand">APIpedia</div>
        <div class="site-footer__text">æ—¥æœ¬èªAPIã‚«ã‚¿ãƒ­ã‚°</div>
      </div>
      <div class="site-footer__links">
        <a href="compare.html">æ¯”è¼ƒè¡¨</a>
        <a href="guides/">ã‚¬ã‚¤ãƒ‰</a>
        <a href="lean-canvas.html">ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</a>
        <a href="strategy.html">æˆ¦ç•¥</a>
        <a href="https://github.com" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 24px; padding: 24px 0; border-top: 1px solid var(--border-color); margin-top: 16px;">
      <div>
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-primary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">æ¯”è¼ƒã‚¬ã‚¤ãƒ‰</div>
        <div style="display: flex; flex-direction: column; gap: 6px;">
          <a href="guides/payment-api-comparison.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ğŸ’³ æ±ºæ¸ˆAPIæ¯”è¼ƒ</a>
          <a href="guides/auth-api-comparison.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ğŸ” èªè¨¼APIæ¯”è¼ƒ</a>
          <a href="guides/ai-api-comparison.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ğŸ¤– AI/LLM APIæ¯”è¼ƒ</a>
          <a href="guides/notification-api-comparison.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ğŸ“§ é€šçŸ¥APIæ¯”è¼ƒ</a>
          <a href="guides/maps-api-comparison.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ğŸ—ºï¸ åœ°å›³APIæ¯”è¼ƒ</a>
        </div>
      </div>
      <div>
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-primary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">ã‚«ãƒ†ã‚´ãƒª</div>
        <div style="display: flex; flex-direction: column; gap: 6px;">
          <a href="compare.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ã‚«ãƒ†ã‚´ãƒªåˆ¥æ¯”è¼ƒè¡¨</a>
          <a href="index.html#catalog" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">å…¨APIã‚«ã‚¿ãƒ­ã‚°</a>
          <a href="index.html#ranking" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        </div>
      </div>
      <div>
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-primary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">ã‚µã‚¤ãƒˆæƒ…å ±</div>
        <div style="display: flex; flex-direction: column; gap: 6px;">
          <a href="lean-canvas.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</a>
          <a href="strategy.html" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">æˆ¦ç•¥</a>
          <a href="sitemap.xml" style="font-size: 0.8rem; color: var(--text-secondary); text-decoration: none;">ã‚µã‚¤ãƒˆãƒãƒƒãƒ—</a>
        </div>
      </div>
    </div>
    <div class="site-footer__copyright">
      &copy; 2026 APIpedia. All rights reserved.
    </div>
  </div>
</footer>

<!-- Detail Modal -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal" id="modalContent"></div>
</div>

<script>
(function() {
  'use strict';

  let allApis = [];
  let categories = [];
  let activeCategory = 'all';
  let activePricing = 'all';
  let activeSort = 'default';
  let searchQuery = '';
  let favoriteFilter = false;
  let autocompleteIndex = -1;

  const difficultyLabel = { easy: 'åˆç´š', medium: 'ä¸­ç´š', hard: 'ä¸Šç´š' };
  const regionLabel = { japan: 'æ—¥æœ¬', global: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«', both: 'æ—¥æœ¬ / ã‚°ãƒ­ãƒ¼ãƒãƒ«' };
  const pricingLabel = { free: 'ç„¡æ–™', freemium: 'ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ ', paid: 'æœ‰æ–™' };
  const authLabel = { apiKey: 'APIã‚­ãƒ¼', oauth2: 'OAuth 2.0', bearer: 'Bearer Token', none: 'èªè¨¼ä¸è¦' };

  // â”€â”€ Favorites (localStorage) â”€â”€
  function getFavorites() {
    try {
      return JSON.parse(localStorage.getItem('apipedia_favorites') || '[]');
    } catch (e) { return []; }
  }
  function saveFavorites(favs) {
    localStorage.setItem('apipedia_favorites', JSON.stringify(favs));
  }
  function toggleFavorite(apiId) {
    var favs = getFavorites();
    var idx = favs.indexOf(apiId);
    if (idx === -1) { favs.push(apiId); } else { favs.splice(idx, 1); }
    saveFavorites(favs);
    updateFavoriteBadge();
    // Update heart icons in DOM
    document.querySelectorAll('.favorite-btn[data-fav-id="' + apiId + '"]').forEach(function(btn) {
      btn.classList.toggle('favorited', favs.indexOf(apiId) !== -1);
      btn.innerHTML = favs.indexOf(apiId) !== -1 ? '&#x2764;&#xFE0F;' : '&#x2661;';
    });
    if (favoriteFilter) renderApis();
  }
  function isFavorited(apiId) {
    return getFavorites().indexOf(apiId) !== -1;
  }
  function updateFavoriteBadge() {
    var favs = getFavorites();
    var badge = document.getElementById('favoriteBadge');
    if (favs.length > 0) {
      badge.textContent = favs.length;
      badge.style.display = 'inline-flex';
    } else {
      badge.style.display = 'none';
    }
  }

  // â”€â”€ Theme Toggle â”€â”€
  function initTheme() {
    var saved = localStorage.getItem('apipedia_theme');
    var theme = saved || 'dark';
    document.documentElement.setAttribute('data-theme', theme);
    updateThemeIcon(theme);
  }
  function toggleTheme() {
    var current = document.documentElement.getAttribute('data-theme');
    var next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('apipedia_theme', next);
    updateThemeIcon(next);
  }
  function updateThemeIcon(theme) {
    var btn = document.getElementById('themeToggle');
    if (btn) btn.innerHTML = theme === 'dark' ? '&#x1F319;' : '&#x2600;&#xFE0F;';
  }

  // â”€â”€ Autocomplete â”€â”€
  function getAutocompleteSuggestions(query) {
    if (!query) return [];
    var q = query.toLowerCase();
    return allApis.filter(function(api) {
      return api.name.toLowerCase().startsWith(q) ||
             api.nameJa.toLowerCase().startsWith(q);
    }).slice(0, 8);
  }
  function renderAutocomplete(suggestions) {
    var list = document.getElementById('autocompleteList');
    if (suggestions.length === 0) {
      list.classList.remove('visible');
      list.innerHTML = '';
      autocompleteIndex = -1;
      return;
    }
    list.innerHTML = suggestions.map(function(api, i) {
      var nameJaPart = api.nameJa !== api.name ? '<span class="autocomplete-item__name-ja"> (' + api.nameJa + ')</span>' : '';
      return '<div class="autocomplete-item" data-index="' + i + '" data-api-id="' + api.id + '" role="option">' +
        '<span class="autocomplete-item__name">' + api.name + '</span>' + nameJaPart +
      '</div>';
    }).join('');
    list.classList.add('visible');
    autocompleteIndex = -1;
  }
  function selectAutocomplete(apiId) {
    var api = allApis.find(function(a) { return a.id === apiId; });
    if (!api) return;
    var searchInput = document.getElementById('searchInput');
    searchInput.value = api.name;
    searchQuery = api.name;
    document.getElementById('autocompleteList').classList.remove('visible');
    autocompleteIndex = -1;
    renderApis();
  }
  function navigateAutocomplete(direction) {
    var list = document.getElementById('autocompleteList');
    var items = list.querySelectorAll('.autocomplete-item');
    if (items.length === 0) return;
    items.forEach(function(item) { item.classList.remove('active'); });
    autocompleteIndex += direction;
    if (autocompleteIndex < 0) autocompleteIndex = items.length - 1;
    if (autocompleteIndex >= items.length) autocompleteIndex = 0;
    items[autocompleteIndex].classList.add('active');
    items[autocompleteIndex].scrollIntoView({ block: 'nearest' });
  }

  async function init() {
    try {
      initTheme();
      var res = await fetch('data/apis.json');
      var data = await res.json();
      allApis = data.apis;
      categories = data.categories;
      renderStats(data);
      renderCategoryNav();
      renderRanking();
      renderApis();
      bindEvents();
      updateFavoriteBadge();
    } catch (e) {
      console.error('Failed to load API data:', e);
    }
  }

  function renderStats(data) {
    document.getElementById('totalApis').textContent = data.metadata.totalApis;
    document.getElementById('totalCategories').textContent = data.metadata.totalCategories;
    var freeCount = allApis.filter(function(a) { return a.pricing === 'free' || a.pricing === 'freemium'; }).length;
    document.getElementById('freeApis').textContent = freeCount;
    var japanCount = allApis.filter(function(a) { return a.region === 'japan' || a.region === 'both'; }).length;
    document.getElementById('japanApis').textContent = japanCount;
  }

  function renderCategoryNav() {
    var nav = document.getElementById('categoryNav');
    var html = '<button class="category-nav__item active" data-category="all">All</button>';
    categories.forEach(function(cat) {
      html += '<button class="category-nav__item" data-category="' + cat.id + '">' +
              cat.icon + ' ' + cat.name + '</button>';
    });
    nav.innerHTML = html;
  }

  function getPopularityClass(score) {
    if (score >= 70) return 'high';
    if (score >= 45) return 'medium';
    return 'low';
  }

  function getScoreColor(score) {
    if (score >= 70) return 'score-color--high';
    if (score >= 45) return 'score-color--medium';
    return 'score-color--low';
  }

  function renderRanking() {
    var list = document.getElementById('rankingList');
    if (!list) return;
    var ranked = allApis
      .filter(function(a) { return a.popularity && a.popularity.score; })
      .sort(function(a, b) { return b.popularity.score - a.popularity.score; })
      .slice(0, 15);
    if (ranked.length === 0) {
      list.innerHTML = '<p style="color:var(--text-muted);text-align:center;padding:40px;">äººæ°—ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>';
      return;
    }
    list.innerHTML = ranked.map(function(api, i) {
      var rank = i + 1;
      var rankClass = rank <= 3 ? 'rank--' + rank : 'rank--other';
      var medal = rank === 1 ? '&#x1F947;' : rank === 2 ? '&#x1F948;' : rank === 3 ? '&#x1F949;' : rank;
      var colorClass = getScoreColor(api.popularity.score);
      var cat = categories.find(function(c) { return c.id === api.category; });
      return '<a href="api/' + api.id + '/" class="ranking-item">' +
        '<div class="ranking-rank ' + rankClass + '">' + medal + '</div>' +
        '<div class="ranking-info">' +
          '<div class="ranking-name">' +
            api.name +
            '<span class="tag tag--' + api.pricing + '" style="font-size:0.65rem;">' + pricingLabel[api.pricing] + '</span>' +
            (cat ? '<span style="font-size:0.7rem;color:var(--text-muted);">' + cat.icon + ' ' + cat.name + '</span>' : '') +
          '</div>' +
          '<div class="ranking-reason">' + (api.popularity.reason || '') + '</div>' +
        '</div>' +
        '<div class="ranking-score ' + colorClass + '">' +
          '<div class="ranking-score__bar"><div class="ranking-score__fill" style="width:' + api.popularity.score + '%;"></div></div>' +
          '<div class="ranking-score__value">' + api.popularity.score + '</div>' +
        '</div>' +
      '</a>';
    }).join('');
  }

  function getFilteredApis() {
    var favs = getFavorites();
    return allApis.filter(function(api) {
      if (activeCategory !== 'all' && api.category !== activeCategory) return false;
      if (activePricing !== 'all' && api.pricing !== activePricing) return false;
      if (favoriteFilter && favs.indexOf(api.id) === -1) return false;
      if (searchQuery) {
        var q = searchQuery.toLowerCase();
        var searchable = [
          api.name, api.nameJa, api.description
        ].concat(api.tags).concat(api.useCases || []).concat([
          pricingLabel[api.pricing] || '',
          regionLabel[api.region] || ''
        ]).join(' ').toLowerCase();
        if (searchable.indexOf(q) === -1) return false;
      }
      return true;
    });
  }

  function renderApis() {
    var filtered = getFilteredApis();
    var grid = document.getElementById('apiGrid');
    var noResults = document.getElementById('noResults');

    // Sort
    if (activeSort === 'popularity') {
      filtered.sort(function(a, b) {
        var sa = (a.popularity && a.popularity.score) || 0;
        var sb = (b.popularity && b.popularity.score) || 0;
        return sb - sa;
      });
    } else if (activeSort === 'name') {
      filtered.sort(function(a, b) { return a.name.localeCompare(b.name); });
    } else {
      // default: featured first, then by popularity
      filtered.sort(function(a, b) {
        if (a.featured && !b.featured) return -1;
        if (!a.featured && b.featured) return 1;
        var sa = (a.popularity && a.popularity.score) || 0;
        var sb = (b.popularity && b.popularity.score) || 0;
        return sb - sa;
      });
    }

    document.getElementById('resultCount').textContent = filtered.length;

    if (filtered.length === 0) {
      grid.innerHTML = '';
      noResults.style.display = 'block';
      return;
    }
    noResults.style.display = 'none';

    grid.innerHTML = filtered.map(function(api, i) {
      var cat = categories.find(function(c) { return c.id === api.category; });
      var staggerClass = 'slide-up stagger-' + ((i % 6) + 1);
      var faved = isFavorited(api.id);
      return '<div class="api-card ' + staggerClass + '" data-api-id="' + api.id + '">' +
        '<div class="api-card__header">' +
          '<div>' +
            '<h3><a href="' + api.url + '" target="_blank" rel="noopener">' + api.name + '</a></h3>' +
            (api.nameJa !== api.name ? '<div style="font-size:0.8rem;color:var(--text-muted);margin-top:2px;">' + api.nameJa + '</div>' : '') +
          '</div>' +
          '<div style="display:flex;gap:4px;flex-shrink:0;align-items:center;">' +
            '<button class="favorite-btn' + (faved ? ' favorited' : '') + '" data-fav-id="' + api.id + '" title="ãŠæ°—ã«å…¥ã‚Š">' + (faved ? '&#x2764;&#xFE0F;' : '&#x2661;') + '</button>' +
            (api.featured ? '<span class="featured-badge">æ³¨ç›®</span>' : '') +
            '<span class="tag tag--' + api.pricing + '">' + pricingLabel[api.pricing] + '</span>' +
          '</div>' +
        '</div>' +
        '<div class="api-card__body">' +
          '<p>' + api.description + '</p>' +
        '</div>' +
        '<div class="api-card__meta">' +
          '<span class="region-tag region--' + api.region + '">' + regionLabel[api.region] + '</span>' +
          (cat ? '<span class="category-badge">' + cat.icon + ' ' + cat.name + '</span>' : '') +
          (api.popularity && api.popularity.score ?
            '<span class="popularity-badge popularity--' + getPopularityClass(api.popularity.score) + '">' +
              '<span class="score-bar"><span class="score-fill" style="width:' + api.popularity.score + '%"></span></span> ' +
              api.popularity.score + 'ç‚¹' +
            '</span>' : '') +
        '</div>' +
        '<div class="api-card__tags">' +
          '<span class="tag">' + authLabel[api.auth] + '</span>' +
          api.tags.slice(0, 3).map(function(t) { return '<span class="tag">' + t + '</span>'; }).join('') +
        '</div>' +
        '<div class="api-card__footer">' +
          '<a href="api/' + api.id + '/" class="api-card__link">è©³ç´°ãƒšãƒ¼ã‚¸ &rarr;</a>' +
          '<span class="api-card__difficulty difficulty--' + api.difficulty + '">' + difficultyLabel[api.difficulty] + '</span>' +
        '</div>' +
      '</div>';
    }).join('');
  }

  function bindEvents() {
    // Search with autocomplete
    var searchInput = document.getElementById('searchInput');
    var acList = document.getElementById('autocompleteList');
    var debounce;

    searchInput.addEventListener('input', function() {
      clearTimeout(debounce);
      var val = searchInput.value.trim();
      // Show autocomplete suggestions
      var suggestions = getAutocompleteSuggestions(val);
      renderAutocomplete(suggestions);
      debounce = setTimeout(function() {
        searchQuery = val;
        renderApis();
      }, 200);
    });

    searchInput.addEventListener('keydown', function(e) {
      var items = acList.querySelectorAll('.autocomplete-item');
      if (!acList.classList.contains('visible') || items.length === 0) return;
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        navigateAutocomplete(1);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        navigateAutocomplete(-1);
      } else if (e.key === 'Enter') {
        e.preventDefault();
        if (autocompleteIndex >= 0 && items[autocompleteIndex]) {
          selectAutocomplete(items[autocompleteIndex].dataset.apiId);
        }
      } else if (e.key === 'Escape') {
        acList.classList.remove('visible');
        autocompleteIndex = -1;
      }
    });

    // Click on autocomplete item
    acList.addEventListener('click', function(e) {
      var item = e.target.closest('.autocomplete-item');
      if (item) selectAutocomplete(item.dataset.apiId);
    });

    // Close autocomplete when clicking outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.search-bar')) {
        acList.classList.remove('visible');
        autocompleteIndex = -1;
      }
    });

    // Category filter
    document.getElementById('categoryNav').addEventListener('click', function(e) {
      var btn = e.target.closest('.category-nav__item');
      if (!btn) return;
      document.querySelectorAll('.category-nav__item').forEach(function(b) { b.classList.remove('active'); });
      btn.classList.add('active');
      activeCategory = btn.dataset.category;
      renderApis();
    });

    // Pricing filter
    document.querySelectorAll('[data-pricing]').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('[data-pricing]').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        activePricing = btn.dataset.pricing;
        renderApis();
      });
    });

    // Sort buttons
    document.querySelectorAll('[data-sort]').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('[data-sort]').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        activeSort = btn.dataset.sort;
        renderApis();
      });
    });

    // Favorite filter button
    document.getElementById('favoriteFilterBtn').addEventListener('click', function() {
      favoriteFilter = !favoriteFilter;
      this.classList.toggle('active', favoriteFilter);
      renderApis();
    });

    // Card click -> open modal or toggle favorite
    document.getElementById('apiGrid').addEventListener('click', function(e) {
      // Handle favorite button click
      var favBtn = e.target.closest('.favorite-btn');
      if (favBtn) {
        e.stopPropagation();
        toggleFavorite(favBtn.dataset.favId);
        return;
      }
      var card = e.target.closest('.api-card');
      if (!card) return;
      // Don't open modal if clicking a link
      if (e.target.closest('a')) return;
      var apiId = card.dataset.apiId;
      if (apiId) openModal(apiId);
    });

    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);

    // Modal close
    var overlay = document.getElementById('modalOverlay');
    overlay.addEventListener('click', function(e) {
      if (e.target === overlay) closeModal();
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') closeModal();
    });
  }

  function openModal(apiId) {
    var api = allApis.find(function(a) { return a.id === apiId; });
    if (!api) return;
    var cat = categories.find(function(c) { return c.id === api.category; });
    var pop = api.popularity || {};
    var colorClass = getScoreColor(pop.score || 0);
    var popClass = getPopularityClass(pop.score || 0);

    var html = '<button class="modal__close" onclick="closeModal()">&times;</button>';

    // Header
    html += '<div class="modal__header">';
    html += '<div class="modal__title">' + api.name + '</div>';
    if (api.nameJa !== api.name) html += '<div class="modal__subtitle">' + api.nameJa + '</div>';
    html += '<div class="modal__badges">';
    html += '<span class="tag tag--' + api.pricing + '">' + pricingLabel[api.pricing] + '</span>';
    html += '<span class="region-tag region--' + api.region + '">' + regionLabel[api.region] + '</span>';
    if (cat) html += '<span class="category-badge">' + cat.icon + ' ' + cat.name + '</span>';
    html += '<span class="api-card__difficulty difficulty--' + api.difficulty + '">' + difficultyLabel[api.difficulty] + '</span>';
    if (api.featured) html += '<span class="featured-badge">&#x2B50; æ³¨ç›®</span>';
    html += '</div></div>';

    // Description
    html += '<div class="modal__desc">' + api.description + '</div>';

    // Score hero
    if (pop.score) {
      html += '<div class="modal__score-hero">';
      html += '<div class="modal__score-number ' + colorClass + '">' + pop.score + '</div>';
      html += '<div class="modal__score-bar-wrap">';
      html += '<div class="modal__score-label">&#x1F4CA; äººæ°—ã‚¹ã‚³ã‚¢ï¼ˆ100ç‚¹æº€ç‚¹ï¼‰</div>';
      html += '<div class="modal__score-bar"><div class="modal__score-fill" style="width:' + pop.score + '%;background:linear-gradient(90deg,' + (popClass === "high" ? "var(--color-success),#4ade80" : popClass === "medium" ? "var(--color-warning),#fbbf24" : "#64748b,#94a3b8") + ');"></div></div>';
      if (pop.reason) html += '<div class="modal__score-reason">' + pop.reason + '</div>';
      html += '</div></div>';
    }

    // Detailed analysis
    if (pop.detail) {
      html += '<div class="modal__section">';
      html += '<div class="modal__section-title">&#x1F50D; è©³ç´°åˆ†æ</div>';
      html += '<div class="modal__detail-text">' + pop.detail + '</div>';
      html += '</div>';
    }

    // Metrics
    if (pop.monthlyUsers || pop.monthlyApiCalls || pop.githubStars || pop.npmDownloads || pop.marketShare) {
      html += '<div class="modal__section">';
      html += '<div class="modal__section-title">&#x1F4CA; åˆ©ç”¨å®Ÿç¸¾ãƒ»æŒ‡æ¨™</div>';
      html += '<div class="modal__metrics">';
      if (pop.monthlyUsers) html += '<div class="modal__metric"><div class="modal__metric-label">åˆ©ç”¨è€…æ•°</div><div class="modal__metric-value">' + pop.monthlyUsers + '</div></div>';
      if (pop.monthlyApiCalls) html += '<div class="modal__metric"><div class="modal__metric-label">APIã‚³ãƒ¼ãƒ«æ•°</div><div class="modal__metric-value">' + pop.monthlyApiCalls + '</div></div>';
      if (pop.marketShare) html += '<div class="modal__metric"><div class="modal__metric-label">å¸‚å ´ãƒã‚¸ã‚·ãƒ§ãƒ³</div><div class="modal__metric-value">' + pop.marketShare + '</div></div>';
      if (pop.npmDownloads) html += '<div class="modal__metric"><div class="modal__metric-label">npm ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</div><div class="modal__metric-value">' + pop.npmDownloads + '</div></div>';
      if (pop.githubStars) html += '<div class="modal__metric"><div class="modal__metric-label">GitHub Stars</div><div class="modal__metric-value">' + pop.githubStars + '</div></div>';
      html += '</div></div>';
    }

    // Adopters
    if (pop.adopters && pop.adopters.length > 0) {
      html += '<div class="modal__section">';
      html += '<div class="modal__section-title">&#x1F3E2; ä¸»ãªåˆ©ç”¨ä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹</div>';
      html += '<div class="modal__adopters">';
      pop.adopters.forEach(function(a) { html += '<span class="modal__adopter">' + a + '</span>'; });
      html += '</div></div>';
    }

    // Sources
    if (pop.sources && pop.sources.length > 0) {
      html += '<div class="modal__section">';
      html += '<div class="modal__section-title">&#x1F4CE; æ ¹æ‹ ãƒ»å‚ç…§å…ƒ</div>';
      html += '<ul class="modal__sources">';
      pop.sources.forEach(function(s) {
        html += '<li><a href="' + s.url + '" target="_blank" rel="noopener" class="modal__source-link">' +
          '<span class="modal__source-icon">&#x1F517;</span> ' + s.label + '</a></li>';
      });
      html += '</ul></div>';
    }

    // API details table
    html += '<div class="modal__section">';
    html += '<div class="modal__section-title">&#x2699;&#xFE0F; APIä»•æ§˜</div>';
    html += '<div class="modal__metrics">';
    html += '<div class="modal__metric"><div class="modal__metric-label">èªè¨¼æ–¹å¼</div><div class="modal__metric-value">' + authLabel[api.auth] + '</div></div>';
    html += '<div class="modal__metric"><div class="modal__metric-label">ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼</div><div class="modal__metric-value">' + (api.responseFormat || []).join(', ') + '</div></div>';
    html += '<div class="modal__metric"><div class="modal__metric-label">ãƒ¬ãƒ¼ãƒˆåˆ¶é™</div><div class="modal__metric-value">' + (api.rateLimit || 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§') + '</div></div>';
    html += '<div class="modal__metric"><div class="modal__metric-label">æ–™é‡‘</div><div class="modal__metric-value">' + (api.pricingDetail || '-') + '</div></div>';
    if (api.sdks && api.sdks.length > 0) {
      html += '<div class="modal__metric" style="grid-column:1/-1;"><div class="modal__metric-label">SDK</div><div class="modal__metric-value">' + api.sdks.join(', ') + '</div></div>';
    }
    html += '</div></div>';

    // Actions
    html += '<div class="modal__actions">';
    html += '<a href="' + (api.docsUrl || api.url) + '" target="_blank" rel="noopener" class="modal__action-btn modal__action-btn--primary">&#x1F4D6; ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹</a>';
    html += '<a href="' + api.url + '" target="_blank" rel="noopener" class="modal__action-btn modal__action-btn--secondary">&#x1F310; å…¬å¼ã‚µã‚¤ãƒˆ</a>';
    html += '</div>';

    document.getElementById('modalContent').innerHTML = html;
    document.getElementById('modalOverlay').classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    document.getElementById('modalOverlay').classList.remove('active');
    document.body.style.overflow = '';
  }
  window.closeModal = closeModal;

  // Init
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

</body>
</html>
